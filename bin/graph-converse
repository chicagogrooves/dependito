#!/usr/bin/ruby
# TODO rewrite in JS
require 'json'
obj = JSON.parse $stdin.read

def converse_of_tree tree
  tree.inject({}) do |converse, (source, targets)|
    targets.each do |t|
      case converse[t]
      when Array
        converse[t].unshift source
      when nil
        converse[t] = [source]
      end
    end
    converse
  end
end

puts JSON.dump(converse_of_tree(obj))
